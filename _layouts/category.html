---
layout: default
---

{% assign category_name = page.category | default: page.title %}

<style>
  .cat-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 14px;
    margin-top: 18px;
  }

  .cat-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 14px;
    padding: 14px 14px 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.04);
    transition: transform .12s ease, box-shadow .12s ease;
  }

  .cat-card:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.07);
  }

  .cat-head {
    display:flex;
    align-items:center;
    gap: 10px;
    margin-bottom: 10px;
  }

  .cat-icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display:flex;
    align-items:center;
    justify-content:center;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    color: var(--accent-color);
    flex: 0 0 auto;
  }

  .cat-name a {
    text-decoration: none;
    color: var(--link-color);
    font-weight: 800;
    font-size: 1.05rem;
    line-height: 1.1;
  }

  .cat-meta {
    display:flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 6px;
    color: var(--text-muted);
    font-size: .85rem;
  }

  .chip {
    display: inline-block;
    padding: 2px 7px;
    border-radius: 6px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    font-weight: 600;
    font-size: 0.72rem;
    line-height: 1.3;
  }

  .chip-pack {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 700;
    background: rgba(128,128,128,0.10);
    border: 1px solid rgba(128,128,128,0.18);
  }

  .chip-req {
    background: rgba(0,123,255,0.08);
    border: 1px solid rgba(0,123,255,0.15);
    color: #007bff;
  }

  .status-dot {
    margin-left: auto;
    opacity: .9;
    cursor: help;
  }

  .cat-desc {
    color: var(--text-muted);
    font-size: .9rem;
    line-height: 1.45;
    margin-top: 8px;
  }
</style>

<div class="content-wrapper">
  <div style="display:flex; align-items:baseline; justify-content:space-between; gap:12px; flex-wrap:wrap;">
    <h1 style="margin:0;">{{ page.title | default: category_name }}</h1>
    <a href="{{ site.baseurl }}/mods/" style="text-decoration:none; color: var(--link-color); font-weight:700;">‚Üê Back to Mods</a>
  </div>

  {% if page.subtitle %}
    <div class="cat-desc">{{ page.subtitle }}</div>
  {% endif %}

  <div class="cat-grid">
    {% assign shown = 0 %}

    {% for mod_entry in site.data.mods %}
      {% assign mod_page = site.mods | where: "mod_id", mod_entry.id | first %}

      {% assign display_name = mod_page.title | default: mod_entry.name | default: mod_entry.id %}
      {% assign display_icon = mod_page.icon | default: mod_entry.icon | default: 'fas fa-box' %}
      {% assign current_version = mod_page.version | default: mod_entry.version %}
      {% assign final_reqs = mod_page.requirements | default: mod_entry.requirements %}
      {% assign final_packs = mod_page.packs | default: mod_entry.packs %}
      {% assign update_date = mod_page.last_update | default: mod_entry.updated %}
      {% assign status_raw = mod_entry.status | default: mod_page.status %}

      {% assign all_categories = mod_page.categories | default: mod_entry.categories | default: "" %}

      {% if all_categories and all_categories contains category_name %}
        {% assign shown = shown | plus: 1 %}

        <div class="cat-card">
          <div class="cat-head">
            <div class="cat-icon">
              <i class="{{ display_icon }}" style="font-size: 1.25rem;"></i>
            </div>

            <div class="cat-name" style="min-width:0;">
              {% if mod_page %}
                <a href="{{ mod_page.url | relative_url }}">{{ display_name }}</a>
              {% else %}
                <span style="font-weight:800; opacity:.7;">{{ display_name }}</span>
              {% endif %}

              <div style="margin-top:6px; display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
                {% if current_version %}
                  <span class="chip" title="Version">v{{ current_version }}</span>
                {% endif %}
                {% if update_date %}
                  <span class="chip" title="Last Update">{{ update_date | date: "%b %d, %Y" }}</span>
                {% endif %}
              </div>
            </div>

            {% if status_raw %}
              {% assign status = status_raw | capitalize %}
              <div class="status-dot">
                {% if status == 'Updated' %}<i class="fas fa-arrow-alt-circle-up" title="Updated" style="color:#007bff; font-size:1.2rem;"></i>
                {% elsif status == 'Compatible' %}<i class="fas fa-check-circle" title="Compatible" style="color:#28a745; font-size:1.2rem;"></i>
                {% elsif status == 'Broken' %}<i class="fas fa-times-circle" title="Broken" style="color:#dc3545; font-size:1.2rem;"></i>
                {% else %}<i class="fas fa-question-circle" title="Unknown" style="color:#ffc107; font-size:1.2rem;"></i>{% endif %}
              </div>
            {% endif %}
          </div>

          <div class="cat-meta">
            {% if final_packs and final_packs.size > 0 %}
              {% for pack_id in final_packs %}
                {% if pack_id != "BG" %}
                  <span class="chip chip-pack" title="{{ site.data.packs[pack_id].en | default: pack_id }}">{{ pack_id }}</span>
                {% endif %}
              {% endfor %}
            {% endif %}

            {% if final_reqs and final_reqs.size > 0 %}
              {% for req_id in final_reqs %}
                {% assign dep_info = site.data.dependencies[req_id] %}
                {% assign target_url = dep_info.url | default: "#" %}
                <a class="chip chip-req"
                   href="{{ target_url }}"
                   title="{{ dep_info.name | default: req_id }}"
                   {% if target_url contains 'http' %}target="_blank" rel="noopener"{% endif %}
                   style="text-decoration:none;">
                  {{ dep_info.short_name | default: req_id }}
                </a>
              {% endfor %}
            {% endif %}
          </div>

          {% if mod_page and mod_page.excerpt %}
            <div class="cat-desc">{{ mod_page.excerpt | strip_html | truncate: 140 }}</div>
          {% endif %}
        </div>

      {% endif %}
    {% endfor %}
  </div>

  {% if shown == 0 %}
    <div style="margin-top:18px; color: var(--text-muted);">No mods found in this category.</div>
  {% endif %}
</div>
