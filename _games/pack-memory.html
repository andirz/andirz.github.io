---
layout: page
title: Pack Picker Memory
icon: "fas fa-brain"
order: 2
description: "Match all Sims 4 Expansion and Game Packs before time runs out."
mode: Memory
difficulty: Medium
---

<div class="pm-shell" id="pm-root"
     data-ep-count="18"
     data-gp-count="12"
     data-pairs="8"
     data-time-limit="90"
     data-folder="{{ '/assets/img/packs/mono/' | relative_url }}">
  <div class="pm-top">
    <div class="pm-title">
      <h2>Pack Picker Memory</h2>
      <p>Match all Sims 4 packs before time runs out.</p>
    </div>

    <div class="pm-stats">
      <div class="pm-pill" id="pm-status">Matches: 0 / 0</div>
      <div class="pm-pill" id="pm-misses">Misses: 0</div>
      <div class="pm-pill" id="pm-timer">Time: 00:00</div>
      <button class="pm-btn" id="pm-restart" type="button">Restart</button>
    </div>
  </div>

  <div class="pm-grid" id="pm-grid" aria-label="Memory grid"></div>

  <div class="pm-note">Tip: Works best with mouse. Mobile also ok.</div>
</div>

<div class="pm-overlay" id="pm-overlay" aria-hidden="true">
  <div class="pm-modal" id="pm-modal">
    <h3 id="pm-modal-title">GAME OVER</h3>
    <p id="pm-modal-text">Time is up!</p>
    <div class="pm-modal-row">
      <div class="pm-pill" id="pm-final-matches">Matches: 0 / 0</div>
      <div class="pm-pill" id="pm-final-misses">Misses: 0</div>
    </div>
    <button class="pm-btn" id="pm-play-again" type="button">Play again</button>
  </div>
</div>

<style>
  :root{
    /* BLACK & WHITE THEME */
    --pm-bg:#ffffff;
    --pm-card:#ffffff;
    --pm-ink:#0b0b0b;
    --pm-muted:#3b3b3b;
    --pm-border:#d9d9d9;
    --pm-blue:#0b0b0b;   /* used for buttons/pills -> black */
    --pm-green:#0b0b0b;  /* no green in bw mode */
    --pm-red:#0b0b0b;    /* no red in bw mode */
    --pm-shadow:0 16px 22px -8px rgba(0,0,0,.10);
    --pm-radius:22px;
    --pm-gap:10px;
    --pm-flip:0.42s cubic-bezier(.175,.885,.32,1.22);
    --pm-size:146px;
  }

  .pm-shell{
    max-width: 920px;
    margin: 1.25rem auto;
    background: var(--pm-bg);
    border: 1px solid var(--pm-border);
    border-radius: var(--pm-radius);
    box-shadow: var(--pm-shadow);
    padding: 1.1rem 1.1rem 1.2rem;
  }

  .pm-top{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap: 1rem;
    flex-wrap: wrap;
    margin-bottom: 1rem;
  }

  .pm-title h2{
    margin:0;
    font-size:1.3rem;
    font-weight:850;
    color:var(--pm-ink);
    letter-spacing:-.01em;
  }
  .pm-title p{
    margin:.25rem 0 0;
    color:var(--pm-muted);
    font-size:.9rem;
  }

  .pm-stats{
    display:flex;
    gap:.5rem;
    align-items:center;
    flex-wrap:wrap;
    justify-content:flex-end;
  }

  .pm-pill{
    background: var(--pm-card);
    border: 2px solid var(--pm-border);
    border-radius: 999px;
    padding: .42rem .7rem;
    font-weight: 800;
    color: var(--pm-blue);
    font-size: .85rem;
    min-width: 120px;
    text-align:center;
  }

  /* In bw mode, "warning" is just inverted */
  .pm-pill.is-warn{
    background: #0b0b0b;
    border-color:#0b0b0b;
    color:#ffffff;
  }

  .pm-btn{
    background: var(--pm-blue);
    color:#fff;
    border:none;
    border-radius: 12px;
    padding: .5rem .9rem;
    font-weight: 850;
    font-size: .9rem;
    cursor:pointer;
    transition: transform .12s ease, filter .12s ease;
  }
  .pm-btn:hover{ filter: brightness(1.08); transform: translateY(-1px); }
  .pm-btn:active{ transform: translateY(0px); }

  .pm-grid{
    display:grid;
    gap: var(--pm-gap);
    justify-content:center;
    perspective: 1100px;
  }

  @media (min-width: 900px){ .pm-grid{ grid-template-columns: repeat(4, var(--pm-size)); } }
  @media (min-width: 620px) and (max-width: 899px){ .pm-grid{ grid-template-columns: repeat(4, var(--pm-size)); } }
  @media (max-width: 619px){ .pm-grid{ grid-template-columns: repeat(3, var(--pm-size)); } }

  .pm-card{
    width: var(--pm-size);
    height: var(--pm-size);
    position:relative;
    transform-style:preserve-3d;
    transition: transform var(--pm-flip);
    cursor:pointer;
    border-radius: 14px;
    border: 0;
    padding: 0;
    background: transparent;
  }
  .pm-card.is-flipped{ transform: rotateY(180deg); }

  /* FIX: matched cards stay open forever (force the flip) */
  .pm-card.is-matched{
    transform: rotateY(180deg) !important;
    cursor: default;
    pointer-events: none;
    opacity: .98;
  }

  .pm-face{
    position:absolute;
    inset:0;
    backface-visibility:hidden;
    border-radius: 14px;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
  }

  /* FRONT: black face */
  .pm-front{
    background: #0b0b0b;
    border: 2px solid rgba(255,255,255,.10);
    color:#ffffff;
    font-weight: 900;
    letter-spacing: .06em;
    font-size: 1.1rem;
    user-select:none;
  }

  /* BACK: white face + black border */
  .pm-back{
    background: var(--pm-card);
    transform: rotateY(180deg);
    border: 2px solid #0b0b0b;
    padding: 10px;
  }

  /* FORCE ICONS INTO BLACK/WHITE */
  .pm-back img{
    width:100%;
    height:100%;
    object-fit:contain;
    display:block;
    filter: grayscale(1) contrast(1.25) brightness(0.9);
  }

  .pm-fallback{
    display:none;
    width:100%;
    height:100%;
    border-radius: 10px;
    background:#f2f2f2;
    color:#0b0b0b;
    font-weight: 900;
    align-items:center;
    justify-content:center;
    font-size:.95rem;
  }

  .pm-note{
    margin-top: .9rem;
    color: var(--pm-muted);
    font-size: .85rem;
    text-align:center;
  }

  .pm-overlay{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.55);
    display:none;
    align-items:center;
    justify-content:center;
    padding: 1rem;
    z-index: 9999;
  }
  .pm-modal{
    width: min(520px, 100%);
    background: #fff;
    border-radius: 18px;
    border: 1px solid var(--pm-border);
    box-shadow: 0 28px 44px -18px rgba(0,0,0,.35);
    padding: 1rem 1rem 1.1rem;
    text-align:center;
  }
  .pm-modal h3{
    margin: .1rem 0 .3rem;
    font-size: 1.35rem;
    font-weight: 900;
    color: var(--pm-ink);
  }
  .pm-modal p{
    margin: 0 0 .9rem;
    color: var(--pm-muted);
  }
  .pm-modal-row{
    display:flex;
    gap:.5rem;
    justify-content:center;
    flex-wrap: wrap;
    margin-bottom: .9rem;
  }
  .pm-modal.is-win .pm-btn{ background: #0b0b0b; }
</style>

<script>
{% raw %}
(function(){
  var root = document.getElementById("pm-root");
  if(!root) return;

  var grid = document.getElementById("pm-grid");
  var statusEl = document.getElementById("pm-status");
  var missesEl = document.getElementById("pm-misses");
  var timerEl  = document.getElementById("pm-timer");
  var restartBtn = document.getElementById("pm-restart");

  var overlay = document.getElementById("pm-overlay");
  var modal = document.getElementById("pm-modal");
  var modalTitle = document.getElementById("pm-modal-title");
  var modalText  = document.getElementById("pm-modal-text");
  var finalMatches = document.getElementById("pm-final-matches");
  var finalMisses  = document.getElementById("pm-final-misses");
  var playAgainBtn = document.getElementById("pm-play-again");

  var EP = parseInt(root.dataset.epCount || "18", 10);
  var GP = parseInt(root.dataset.gpCount || "12", 10);
  var PAIRS = parseInt(root.dataset.pairs || "8", 10);
  var TIME = parseInt(root.dataset.timeLimit || "90", 10);

  var folder = root.dataset.folder || "/assets/img/packs/mono/";
  if(folder && folder.charAt(folder.length-1) !== "/") folder += "/";

  var opened = [];
  var locked = false;
  var matches = 0;
  var misses = 0;
  var timerId = null;
  var startMs = 0;

  var packs = [];
  for (var i=1;i<=EP;i++){
    packs.push("ep" + String(i).padStart(2,"0"));
  }
  for (var j=1;j<=GP;j++){
    var id = "gp" + String(j).padStart(2,"0");
    if(id === "gp09") continue;          // EXCLUDE gp09 completely
    packs.push(id);
  }

  function shuffleInPlace(arr){
    for(var i = arr.length - 1; i > 0; i--){
      var j = Math.floor(Math.random() * (i + 1));
      var t = arr[i]; arr[i] = arr[j]; arr[j] = t;
    }
    return arr;
  }

  function format(sec){
    var m = Math.floor(sec/60);
    var s = sec % 60;
    return String(m).padStart(2,"0") + ":" + String(s).padStart(2,"0");
  }

  function setTimer(left){
    if(left < 0) left = 0;
    timerEl.textContent = "Time: " + format(left);
    if(left <= 10 && left > 0) timerEl.classList.add("is-warn");
    else timerEl.classList.remove("is-warn");
  }

  function hideOverlay(){
    overlay.style.display = "none";
    overlay.setAttribute("aria-hidden","true");
  }

  function showOverlay(isWin){
    finalMatches.textContent = "Matches: " + matches + " / " + PAIRS;
    finalMisses.textContent = "Misses: " + misses;

    if(isWin){
      modal.classList.add("is-win");
      modalTitle.textContent = "VICTORY";
      modalText.textContent = "Perfect memory! You had " + misses + " misses.";
      playAgainBtn.textContent = "Play again";
    } else {
      modal.classList.remove("is-win");
      modalTitle.textContent = "GAME OVER";
      modalText.textContent = "Time is up!";
      playAgainBtn.textContent = "Try again";
    }

    overlay.style.display = "flex";
    overlay.setAttribute("aria-hidden","false");
  }

  function flipBack(){
    for(var k=0;k<opened.length;k++){
      opened[k].classList.remove("is-flipped");
    }
    opened = [];
  }

  function onCard(card){
    if(locked) return;
    if(card.classList.contains("is-matched")) return;
    if(card.classList.contains("is-flipped")) return;

    card.classList.add("is-flipped");
    opened.push(card);

    if(opened.length < 2) return;

    locked = true;
    var a = opened[0].dataset.id;
    var b = opened[1].dataset.id;

    if(a === b){
      matches++;
      opened[0].classList.add("is-matched");
      opened[1].classList.add("is-matched");
      opened = [];
      locked = false;

      statusEl.textContent = "Matches: " + matches + " / " + PAIRS;

      if(matches === PAIRS){
        clearInterval(timerId);
        setTimeout(function(){ showOverlay(true); }, 250);
      }
    } else {
      misses++;
      missesEl.textContent = "Misses: " + misses;
      setTimeout(function(){
        flipBack();
        locked = false;
      }, 800);
    }
  }

  function buildDeck(){
    var pool = packs.slice();
    shuffleInPlace(pool);
    var chosen = pool.slice(0, PAIRS);
    var deck = chosen.concat(chosen);
    return shuffleInPlace(deck);
  }

  function makeCard(id){
    var card = document.createElement("button");
    card.type = "button";
    card.className = "pm-card";
    card.dataset.id = id;

    var front = document.createElement("div");
    front.className = "pm-face pm-front";
    front.textContent = "?";

    var back = document.createElement("div");
    back.className = "pm-face pm-back";

    var img = document.createElement("img");
    img.alt = id;
    img.loading = "lazy";
    img.src = folder + id + ".png";

    var fb = document.createElement("div");
    fb.className = "pm-fallback";
    fb.textContent = id.toUpperCase();

    img.addEventListener("error", function(){
      img.style.display = "none";
      fb.style.display = "flex";
    });

    back.appendChild(img);
    back.appendChild(fb);
    card.appendChild(front);
    card.appendChild(back);

    card.addEventListener("click", function(){ onCard(card); });
    return card;
  }

  function reset(){
    hideOverlay();
    grid.innerHTML = "";
    opened = [];
    locked = false;
    matches = 0;
    misses = 0;

    statusEl.textContent = "Matches: 0 / " + PAIRS;
    missesEl.textContent = "Misses: 0";
    timerEl.classList.remove("is-warn");

    clearInterval(timerId);
    startMs = Date.now();
    setTimer(TIME);

    timerId = setInterval(function(){
      var left = TIME - Math.floor((Date.now() - startMs) / 1000);
      setTimer(left);

      if(left <= 0){
        clearInterval(timerId);
        locked = true;
        flipBack();
        showOverlay(false);
      }
    }, 250);

    var deck = buildDeck();
    for(var i=0;i<deck.length;i++){
      grid.appendChild(makeCard(deck[i]));
    }
  }

  restartBtn.addEventListener("click", reset);
  playAgainBtn.addEventListener("click", reset);
  overlay.addEventListener("click", function(e){
    if(e.target === overlay) hideOverlay();
  });

  reset();
})();
{% endraw %}
</script>
