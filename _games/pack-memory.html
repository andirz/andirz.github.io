---
layout: page
title: Pack Picker Memory
icon: "fas fa-brain"
order: 2
description: "Match all Sims 4 Expansion and Game Packs before time runs out."
mode: Memory
difficulty: Medium
---

<div class="pm-shell" id="pm-root"
     data-ep-count="18"
     data-gp-count="12"
     data-pairs="8"
     data-time-limit="90"
     data-folder="{{ '/assets/img/packs/mono/' | relative_url }}">
  <div class="pm-top">
    <div class="pm-title">
      <h2>Pack Picker Memory</h2>
      <p>Match all Sims 4 packs before time runs out.</p>
    </div>

    <div class="pm-stats">
      <div class="pm-pill" id="pm-status">Matches: 0 / 8</div>
      <div class="pm-pill" id="pm-misses">Misses: 0</div>
      <div class="pm-pill" id="pm-timer">Time: 00:00</div>
      <button class="pm-btn" id="pm-restart" type="button">Restart</button>
    </div>
  </div>

  <div class="pm-grid" id="pm-grid" aria-label="Memory grid"></div>

  <div class="pm-note">Tip: Works best with mouse. Mobile also ok.</div>
</div>

<div class="pm-overlay" id="pm-overlay" aria-hidden="true">
  <div class="pm-modal" id="pm-modal">
    <h3 id="pm-modal-title">GAME OVER</h3>
    <p id="pm-modal-text">Time is up!</p>
    <div class="pm-modal-row">
      <div class="pm-pill" id="pm-final-matches">Matches: 0 / 8</div>
      <div class="pm-pill" id="pm-final-misses">Misses: 0</div>
    </div>
    <button class="pm-btn" id="pm-play-again" type="button">Play again</button>
  </div>
</div>

<style>
  :root{
    --pm-bg:#f8fafc;
    --pm-card:#fff;
    --pm-ink:#0f172a;
    --pm-muted:#64748b;
    --pm-border:#e2e8f0;
    --pm-blue:#1e293b;
    --pm-green:#2ecc71;
    --pm-red:#e74c3c;
    --pm-shadow:0 16px 22px -8px rgba(0,0,0,.06);
    --pm-radius:22px;
    --pm-gap:10px;
    --pm-flip:0.42s cubic-bezier(.175,.885,.32,1.22);
    --pm-size:146px;
  }

  .pm-shell{ max-width: 920px; margin: 1.25rem auto; background: var(--pm-bg); border: 1px solid var(--pm-border); border-radius: var(--pm-radius); box-shadow: var(--pm-shadow); padding: 1.1rem 1.1rem 1.2rem; }
  .pm-top{ display:flex; justify-content:space-between; align-items:flex-start; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem; }
  .pm-title h2{ margin:0; font-size:1.3rem; font-weight:850; color:var(--pm-ink); letter-spacing:-.01em; }
  .pm-title p{ margin:.25rem 0 0; color:var(--pm-muted); font-size:.9rem; }
  .pm-stats{ display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; justify-content:flex-end; }
  .pm-pill{ background: var(--pm-card); border: 2px solid var(--pm-border); border-radius: 999px; padding: .42rem .7rem; font-weight: 800; color: var(--pm-blue); font-size: .85rem; min-width: 120px; text-align:center; }
  .pm-pill.is-warn{ background: var(--pm-red); border-color:#c0392b; color:#fff; }
  .pm-btn{ background: var(--pm-blue); color:#fff; border:none; border-radius: 12px; padding: .5rem .9rem; font-weight: 850; font-size: .9rem; cursor:pointer; }

  .pm-grid{ display:grid; gap: var(--pm-gap); justify-content:center; perspective: 1100px; }
  @media (min-width: 620px){ .pm-grid{ grid-template-columns: repeat(4, var(--pm-size)); } }
  @media (max-width: 619px){ .pm-grid{ grid-template-columns: repeat(3, var(--pm-size)); } }

  .pm-card{ width: var(--pm-size); height: var(--pm-size); position:relative; transform-style:preserve-3d; transition: transform var(--pm-flip); cursor:pointer; border: 0; padding: 0; background: transparent; }
  .pm-card.is-flipped{ transform: rotateY(180deg); }
  .pm-card.is-matched{ cursor: default; }

  .pm-face{ position:absolute; inset:0; backface-visibility:hidden; border-radius: 14px; display:flex; align-items:center; justify-content:center; overflow:hidden; }
  .pm-front{ background: linear-gradient(180deg,#22314a,#152033); border: 2px solid rgba(255,255,255,.08); color:#fff; font-weight: 900; font-size: 1.1rem; }
  .pm-back{ background: var(--pm-card); transform: rotateY(180deg); border: 2px solid var(--pm-green); padding: 10px; }
  
  /* Icons Schwarz-Weiß Filter */
  .pm-back img{ width:100%; height:100%; object-fit:contain; filter: grayscale(1) contrast(200%); }

  .pm-overlay{ position: fixed; inset: 0; background: rgba(2,6,23,.55); display:none; align-items:center; justify-content:center; z-index: 9999; }
  .pm-modal{ width: min(520px, 100%); background: #fff; border-radius: 18px; padding: 1.5rem; text-align:center; }
</style>

<script>
{% raw %}
(function(){
  var root = document.getElementById("pm-root");
  if(!root) return;

  var grid = document.getElementById("pm-grid");
  var statusEl = document.getElementById("pm-status");
  var missesEl = document.getElementById("pm-misses");
  var timerEl  = document.getElementById("pm-timer");
  
  var EP = 18, GP = 12, PAIRS = 8, TIME = 90;
  var folder = root.dataset.folder || "/assets/img/packs/mono/";
  
  var opened = [], locked = false, matches = 0, misses = 0, timerId = null, startMs = 0;

  var packs = [];
  for (var i=1; i<=EP; i++) packs.push("ep" + String(i).padStart(2,"0"));
  for (var j=1; j<=GP; j++) {
    var id = "gp" + String(j).padStart(2,"0");
    if (id !== "gp09") packs.push(id); // GP09 ausschließen
  }

  function shuffle(arr){ return arr.sort(() => Math.random() - 0.5); }

  function onCard(card){
    if(locked || card.classList.contains("is-matched") || card.classList.contains("is-flipped")) return;

    card.classList.add("is-flipped");
    opened.push(card);

    if(opened.length === 2){
      locked = true;
      if(opened[0].dataset.id === opened[1].dataset.id){
        matches++;
        opened.forEach(c => c.classList.add("is-matched"));
        opened = [];
        locked = false;
        statusEl.textContent = "Matches: " + matches + " / " + PAIRS;
        if(matches === PAIRS) { clearInterval(timerId); setTimeout(() => alert("Victory!"), 500); }
      } else {
        misses++;
        missesEl.textContent = "Misses: " + misses;
        setTimeout(() => {
          opened.forEach(c => c.classList.remove("is-flipped"));
          opened = [];
          locked = false;
        }, 800);
      }
    }
  }

  function reset(){
    grid.innerHTML = ""; matches = 0; misses = 0;
    statusEl.textContent = "Matches: 0 / " + PAIRS;
    missesEl.textContent = "Misses: 0";
    clearInterval(timerId);
    
    var pool = shuffle(packs.slice()).slice(0, PAIRS);
    var deck = shuffle(pool.concat(pool));
    
    deck.forEach(id => {
      var card = document.createElement("button");
      card.className = "pm-card";
      card.dataset.id = id;
      card.innerHTML = `<div class="pm-face pm-front">?</div>
                        <div class="pm-face pm-back"><img src="${folder}${id}.png"></div>`;
      card.onclick = () => onCard(card);
      grid.appendChild(card);
    });

    startMs = Date.now();
    timerId = setInterval(() => {
      var left = TIME - Math.floor((Date.now() - startMs) / 1000);
      timerEl.textContent = "Time: " + left + "s";
      if(left <= 0) { clearInterval(timerId); locked = true; alert("Game Over!"); }
    }, 1000);
  }

  document.getElementById("pm-restart").onclick = reset;
  reset();
})();
{% endraw %}
</script>