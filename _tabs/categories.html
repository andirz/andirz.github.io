---
layout: page
title: Mod Categories
icon: fas fa-tags
order: 3
---

<style>
  .cat-hero{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:14px;
    flex-wrap:wrap;
    margin-top: 4px;
  }
  .cat-hero h1{
    display:flex;
    align-items:center;
    gap:10px;
    margin:0;
    letter-spacing:-0.4px;
  }
  .cat-hero p{
    margin:6px 0 0 0;
    color: var(--text-muted);
    max-width: none;
  }

  .cat-layout{
    display:grid;
    grid-template-columns: 360px 1fr;
    gap: 18px;
    align-items:start;
    margin-top: 14px;
  }

  .cat-left{
    position: sticky;
    top: 92px;
  }

  @media (max-width: 980px){
    .cat-layout{ grid-template-columns: 1fr; }
    .cat-left{ position: static; }
  }

  .cat-panel{
    margin-top: 0;
    padding: 14px 14px 12px;
    border: 1px solid var(--border-color);
    border-radius: 18px;
    background: linear-gradient(180deg, rgba(0,0,0,0.02), transparent);
  }

  .cat-cloud{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    margin-top: 10px;
    margin-bottom: 0;
  }

  .cat-pill{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding: 9px 12px;
    border-radius: 999px;
    border: 1px solid rgba(0,0,0,.14);
    background: rgba(255,255,255,.55);
    color: #334155;
    font-weight: 850;
    font-size: .92rem;
    text-decoration: none;
    line-height: 1.1;
    transition: border-color .12s ease, box-shadow .12s ease, background-color .12s ease;
    backdrop-filter: blur(6px);
  }

  .cat-pill:hover{
    border-color: rgba(0,0,0,.24);
    box-shadow: 0 0 0 4px rgba(0,0,0,.06);
    background: rgba(255,255,255,.75);
  }

  .cat-pill:active{
    border-color: rgba(0,0,0,.32);
    box-shadow: 0 0 0 5px rgba(0,0,0,.09);
    background: rgba(0,0,0,.02);
  }

  .cat-pill.is-active{
    border-color: rgba(0,0,0,.26);
    box-shadow: 0 0 0 5px rgba(0,0,0,.08);
    background: rgba(0,0,0,.03);
    color: var(--link-color);
  }

  .cat-count{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    min-width: 22px;
    height: 22px;
    padding: 0 7px;
    border-radius: 999px;
    font-weight: 900;
    font-size: .78rem;
    color: var(--text-muted);
    border: 1px solid rgba(0,0,0,.10);
    background: rgba(0,0,0,.03);
  }

  .cat-hint{
    color: var(--text-muted);
    margin-top: 2px;
  }

  .cat-section{
    display:none;
  }

  .cat-section h2{
    margin: 0 0 10px 0;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    flex-wrap:wrap;
    letter-spacing:-0.2px;
    font-size: 1.25rem;
    padding-bottom: 12px;
    border-bottom: 1px solid rgba(0,0,0,.08);
  }

  .cat-clear{
    text-decoration:none;
    font-weight: 900;
    color: var(--link-color);
    padding: 6px 10px;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    transition: border-color .12s ease, box-shadow .12s ease;
  }
  .cat-clear:hover{
    border-color: rgba(0,0,0,.22);
    box-shadow: 0 0 0 4px rgba(0,0,0,.06);
  }

  .mods-grid{
    display:none;
    grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
    gap: 18px;
    margin-top: 14px;
  }

  .mod-card{
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    padding: 16px 16px 14px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.06);
    transition: box-shadow .14s ease, border-color .14s ease;
  }

  .mod-card:hover{
    border-color: rgba(0,0,0,.18);
    box-shadow: 0 16px 40px rgba(0,0,0,0.09);
  }

  .mod-head{
    display:flex;
    align-items:center;
    gap: 12px;
    margin-bottom: 10px;
  }

  .mod-icon{
    width: 58px;
    height: 58px;
    border-radius: 18px;
    display:flex;
    align-items:center;
    justify-content:center;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    color: var(--accent-color);
    flex: 0 0 auto;
  }

  .mod-title{
    min-width: 0;
    line-height: 1.1;
  }

  .mod-title a{
    color: var(--link-color);
    text-decoration: none;
    font-weight: 950;
    font-size: 1.16rem;
    display:inline-block;
  }

  .mod-tagline{
    margin-top: 6px;
    color: var(--text-muted);
    font-size: .94rem;
    line-height: 1.42;
  }

  .mod-meta{
    display:flex;
    flex-wrap:wrap;
    gap: 6px;
    margin-top: 12px;
  }

  .chip{
    display:inline-block;
    padding: 3px 8px;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    font-weight: 800;
    font-size: .75rem;
    line-height: 1.2;
    color: var(--text-muted);
  }

  .chip-pack{
    font-family: 'JetBrains Mono', monospace;
    font-weight: 900;
    background: rgba(128,128,128,0.10);
    border: 1px solid rgba(128,128,128,0.18);
  }

  .chip-status{
    font-weight: 950;
    text-transform: uppercase;
    letter-spacing: .35px;
  }

  .status-ok{
    background: rgba(34,197,94,.12);
    border-color: rgba(34,197,94,.28);
    color: rgba(22,101,52,1);
  }
  .status-updated{
    background: rgba(59,130,246,.12);
    border-color: rgba(59,130,246,.28);
    color: rgba(30,64,175,1);
  }
  .status-broken{
    background: rgba(239,68,68,.12);
    border-color: rgba(239,68,68,.28);
    color: rgba(153,27,27,1);
  }
  .status-unknown{
    background: rgba(148,163,184,.18);
    border-color: rgba(148,163,184,.28);
    color: rgba(71,85,105,1);
  }
</style>

<div class="cat-hero">
  <div>
    <h1>
      <i class="fas fa-tags" style="color:var(--accent-color);"></i>
      Mod Categories
    </h1>
    <p>Browse mods by category. Click a badge on the left to instantly view matching mods as cards.</p>
  </div>
</div>

{% assign all_cats = "" | split: "|" %}
{% for m in site.mods %}
  {% if m.categories %}
    {% for c in m.categories %}
      {% assign all_cats = all_cats | push: c %}
    {% endfor %}
  {% endif %}
{% endfor %}

{% assign unique_cats = "" | split: "|" %}
{% for c in all_cats %}
  {% assign c_clean = c | strip %}
  {% unless unique_cats contains c_clean %}
    {% assign unique_cats = unique_cats | push: c_clean %}
  {% endunless %}
{% endfor %}
{% assign unique_cats = unique_cats | sort %}

<div class="cat-layout">

  <div class="cat-left">
    <div class="cat-panel">
      <div class="cat-cloud" id="catCloud">
        {% for c in unique_cats %}
          {% assign c_count = 0 %}
          {% for mm in site.mods %}
            {% if mm.categories and mm.categories contains c %}
              {% assign c_count = c_count | plus: 1 %}
            {% endif %}
          {% endfor %}

          <a class="cat-pill"
             href="{{ site.baseurl }}/categories/?cat={{ c | url_encode }}"
             data-cat="{{ c | escape }}">
            {{ c }}
            <span class="cat-count" title="Mods in this category">{{ c_count }}</span>
          </a>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="cat-right">
    <div class="cat-panel">

      <div id="catHint" class="cat-hint">
        Pick a category on the left to see matching mods.
      </div>

      <div class="cat-section" id="catSelected">
        <h2>
          <span>Showing: <strong id="catSelectedName"></strong></span>
          <a class="cat-clear" href="{{ site.baseurl }}/categories/">Clear</a>
        </h2>

        <div class="mods-grid" id="modsGrid">
          {% for mod_entry in site.data.mods %}
            {% assign mod_page = site.mods | where: "mod_id", mod_entry.id | first %}

            {% assign display_name = mod_page.title | default: mod_entry.name | default: mod_entry.id %}
            {% assign display_icon = mod_page.icon | default: mod_entry.icon | default: 'fas fa-box' %}
            {% assign url = mod_page.url | relative_url %}
            {% assign cats = mod_page.categories | default: mod_entry.categories | default: "" %}

            {%- comment -%} Tagline-PrioritÃ¤t: Page -> Data -> Excerpt -> Content-Fallback {%- endcomment -%}
            {% assign tagline = mod_page.tagline | default: mod_entry.tagline %}
            {% if tagline == nil or tagline == "" %}
              {% if mod_page and mod_page.excerpt %}
                {% assign tagline = mod_page.excerpt | strip_html | strip | truncate: 120 %}
              {% elsif mod_page and mod_page.content %}
                {% assign tagline = mod_page.content | strip_html | strip | truncate: 120 %}
              {% else %}
                {% assign tagline = "Explore this mod and its features." %}
              {% endif %}
            {% endif %}

            {% assign current_version = mod_page.version | default: mod_entry.version %}
            {% assign final_packs = mod_page.packs | default: mod_entry.packs %}

            {% assign status_raw = mod_page.status | default: mod_entry.status | default: "unknown" %}
            {% assign status_key = status_raw | downcase %}

            <div class="mod-card" data-categories="{{ cats | join:'|' | escape }}">
              <div class="mod-head">
                <div class="mod-icon" aria-hidden="true">
                  <i class="{{ display_icon }}" style="font-size:1.45rem;"></i>
                </div>

                <div class="mod-title">
                  {% if mod_page %}
                    <a href="{{ url }}">{{ display_name }}</a>
                  {% else %}
                    <span style="font-weight:950; opacity:.75;">{{ display_name }}</span>
                  {% endif %}

                  <div class="mod-tagline">{{ tagline }}</div>
                </div>
              </div>

              <div class="mod-meta">
                {% if status_key == "broken" %}
                  <span class="chip chip-status status-broken" title="Status">{{ status_raw }}</span>
                {% elsif status_key == "updated" %}
                  <span class="chip chip-status status-updated" title="Status">{{ status_raw }}</span>
                {% elsif status_key == "compatible" %}
                  <span class="chip chip-status status-ok" title="Status">{{ status_raw }}</span>
                {% else %}
                  <span class="chip chip-status status-unknown" title="Status">{{ status_raw }}</span>
                {% endif %}

                {% if current_version %}
                  <span class="chip" title="Version">v{{ current_version }}</span>
                {% endif %}

                {% if final_packs and final_packs.size > 0 %}
                  {% for p in final_packs %}
                    {% if p != "BG" %}
                      <span class="chip chip-pack" title="{{ site.data.packs[p].en | default: p }}">{{ p }}</span>
                    {% endif %}
                  {% endfor %}
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
      </div>

    </div>
  </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const params = new URLSearchParams(window.location.search);
  const cat = params.get('cat');
  if (!cat) return;

  const hint = document.getElementById('catHint');
  if (hint) hint.style.display = 'none';

  const selected = document.getElementById('catSelected');
  const selectedName = document.getElementById('catSelectedName');
  const grid = document.getElementById('modsGrid');
  const pills = document.querySelectorAll('.cat-pill');

  selected.style.display = 'block';
  selectedName.textContent = cat;
  grid.style.display = 'grid';

  pills.forEach(p => {
    if ((p.getAttribute('data-cat') || '').trim() === cat.trim()) {
      p.classList.add('is-active');
    }
  });

  const cards = grid.querySelectorAll('[data-categories]');
  let shown = 0;

  cards.forEach(card => {
    const cats = (card.getAttribute('data-categories') || '').split('|').map(s => s.trim());
    const ok = cats.includes(cat.trim());
    card.style.display = ok ? '' : 'none';
    if (ok) shown++;
  });

  if (shown === 0) {
    const msg = document.createElement('div');
    msg.style.color = 'var(--text-muted)';
    msg.style.marginTop = '10px';
    msg.textContent = 'No mods found in this category.';
    grid.insertAdjacentElement('afterend', msg);
  }
});
</script>
