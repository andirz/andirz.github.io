<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>Tarot Trial</title>
<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #0f172a;
  color: #e5e7eb;
  margin: 0;
  padding: 2rem;
}

.game {
  max-width: 900px;
  margin: auto;
  background: #020617;
  border-radius: 24px;
  padding: 2rem;
  box-shadow: 0 30px 60px rgba(0,0,0,0.6);
}

h1 {
  margin-top: 0;
  font-weight: 800;
}

.status {
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.badge {
  background: #020617;
  border: 1px solid #1e293b;
  border-radius: 999px;
  padding: 0.5rem 1rem;
  font-weight: 600;
}

.cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
  gap: 14px;
}

.card {
  aspect-ratio: 1 / 1.6;
  background: #020617;
  border-radius: 16px;
  border: 2px solid #1e293b;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.25s ease;
}

.card img {
  width: 90%;
  height: 90%;
  object-fit: contain;
}

.card:hover {
  transform: translateY(-4px);
  border-color: #38bdf8;
}

.card.disabled {
  opacity: 0.25;
  pointer-events: none;
}

.prompt {
  margin: 1.5rem 0;
  font-size: 1.1rem;
  font-weight: 600;
}

button {
  margin-top: 1.5rem;
  background: #1e293b;
  color: #e5e7eb;
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: 14px;
  font-weight: 700;
  cursor: pointer;
}

button:hover {
  background: #334155;
}
</style>
</head>
<body>

<div class="game">
  <h1>Tarot Trial</h1>
  <p style="color:#94a3b8; margin-top:-0.5rem">Merken · Kombinieren · Entscheiden</p>

  <div class="status">
    <div class="badge">Score: <span id="score">0</span></div>
    <div class="badge">Lives: <span id="lives">3</span></div>
    <div class="badge">Round: <span id="round">1</span></div>
  </div>

  <div class="prompt" id="prompt">Merke dir die Karten…</div>
  <div class="cards" id="cards"></div>

  <button onclick="startGame()">Restart</button>
</div>

<script>
const base = './'; // Ordner mit PNGs
const deck = [
  'fool','magician','high_spellcaster','empress','emperor','advocate','lovers','chariot','strength','hermit','wheel_of_fortune','justice','suspension','death','temperance','evil','tower','star','moon','sun','judgment','world'
];

let score = 0;
let lives = 3;
let round = 1;
let solution = [];
let locked = true;

const cardsEl = document.getElementById('cards');
const promptEl = document.getElementById('prompt');

function startGame() {
  score = 0; lives = 3; round = 1;
  updateStatus();
  nextRound();
}

function nextRound() {
  locked = true;
  cardsEl.innerHTML = '';
  solution = shuffle(deck).slice(0, Math.min(3 + round, 6));

  promptEl.textContent = 'Merke dir diese Reihenfolge';

  solution.forEach(name => {
    const c = createCard(name);
    cardsEl.appendChild(c);
  });

  setTimeout(() => {
    cardsEl.innerHTML = '';
    promptEl.textContent = 'Klicke die Karten in der richtigen Reihenfolge';
    shuffle(solution).forEach(name => {
      const c = createCard(name, true);
      cardsEl.appendChild(c);
    });
    locked = false;
  }, 2000 + round * 300);
}

function createCard(name, clickable = false) {
  const d = document.createElement('div');
  d.className = 'card';
  const img = document.createElement('img');
  img.src = base + name + '.png';
  d.appendChild(img);

  if (clickable) {
    d.onclick = () => pick(name, d);
  }
  return d;
}

let pickIndex = 0;

function pick(name, el) {
  if (locked) return;

  if (name === solution[pickIndex]) {
    score += 10;
    el.classList.add('disabled');
    pickIndex++;

    if (pickIndex === solution.length) {
      round++;
      pickIndex = 0;
      updateStatus();
      setTimeout(nextRound, 800);
    }
  } else {
    lives--;
    pickIndex = 0;
    updateStatus();
    if (lives <= 0) {
      promptEl.textContent = 'Game Over';
      locked = true;
    }
  }
}

function updateStatus() {
  document.getElementById('score').textContent = score;
  document.getElementById('lives').textContent = lives;
  document.getElementById('round').textContent = round;
}

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

startGame();
</script>

</body>
</html>
