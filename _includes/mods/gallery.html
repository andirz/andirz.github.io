{% comment %}
  Dumb Mod Gallery (NO JS)
  Looks only for:
    /assets/img/mods/<mod_id>/img01.(png|jpg)
    /assets/img/mods/<mod_id>/img02.(png|jpg)
    /assets/img/mods/<mod_id>/img03.(png|jpg)
    /assets/img/mods/<mod_id>/img04.(png|jpg)
  If none exist => outputs NOTHING
{% endcomment %}

{% assign g_filename = page.path | split: "/" | last | replace: ".md", "" %}
{% assign g_mod_id = page.mod_id | default: g_filename %}
{% assign g_dir = "/assets/img/mods/" | append: g_mod_id | append: "/" %}

{% assign g_paths = "" | split: "" %}

{% for i in (1..4) %}
  {% if i < 10 %}
    {% assign num = "0" | append: i %}
  {% else %}
    {% assign num = i %}
  {% endif %}

  {% assign p_png = g_dir | append: "img" | append: num | append: ".png" %}
  {% assign p_jpg = g_dir | append: "img" | append: num | append: ".jpg" %}

  {% assign found = "" %}

  {% for f in site.static_files %}
    {% if f.path == p_png %}
      {% assign found = p_png %}
      {% break %}
    {% endif %}
  {% endfor %}

  {% if found == "" %}
    {% for f in site.static_files %}
      {% if f.path == p_jpg %}
        {% assign found = p_jpg %}
        {% break %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {% if found != "" %}
    {% assign g_paths = g_paths | push: found %}
  {% endif %}
{% endfor %}

{% if g_paths.size > 0 %}

<h3 class="mod-gallery-title">Gallery</h3>

<div class="mod-split-gallery nojs">

  <!-- MAIN IMAGE -->
  <div class="msg-main">
    <img class="msg-main-img"
         src="{{ g_paths[0] }}"
         alt="{{ page.title }} – gallery image 1">
  </div>

  <!-- THUMBS -->
  {% if g_paths.size > 1 %}
  <div class="msg-thumbs" aria-label="Gallery thumbnails">
    {% for p in g_paths %}
      <a class="msg-thumb{% if forloop.first %} active{% endif %}"
         href="{{ p }}"
         target="_blank"
         rel="noopener noreferrer"
         aria-label="Open gallery image {{ forloop.index }}">
        <img src="{{ p }}" alt="{{ page.title }} – gallery thumbnail {{ forloop.index }}">
      </a>
    {% endfor %}
  </div>
  {% endif %}

</div>

{% endif %}

<style>
.mod-gallery-title{
  margin:22px 0 10px;
  font-size:1.25rem;
  font-weight:700;
  border-bottom:1px solid var(--border-color);
  padding-bottom:4px;
}

.mod-split-gallery{
  width:100%;
  display:grid;
  grid-template-columns: 1fr 150px;
  gap:16px;
  margin:14px 0 28px;
}

.msg-main{
  background:#000;
  border-radius:14px;
  overflow:hidden;
  border:1px solid var(--border-color);
}

.msg-main-img{
  width:100%;
  aspect-ratio:16/9;
  object-fit:cover;
  display:block;
}

.msg-thumbs{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.msg-thumb{
  display:block;
  border-radius:10px;
  overflow:hidden;
  border:2px solid transparent;
  background:#000;
  text-decoration:none;
}

.msg-thumb img{
  width:100%;
  aspect-ratio:16/9;
  object-fit:cover;
  display:block;
}

.msg-thumb.active{
  border-color: rgba(0,0,0,0.75);
}

.msg-thumb:hover,
.msg-thumb:focus-visible{
  box-shadow:none;
  filter:none;
}

@media (max-width: 900px){
  .mod-split-gallery{
    grid-template-columns:1fr;
  }
  .msg-thumbs{
    flex-direction:row;
    gap:10px;
    overflow:auto;
    padding-bottom:6px;
  }
  .msg-thumb{
    min-width:120px;
  }
}
</style>
