{%- comment -%}
related-mods.html
Inline related mods (category style)
Icons instead of images
2 rows Ã— 3 items
{%- endcomment -%}

{%- assign max_items = 6 -%}
{%- assign count = 0 -%}
{%- assign current_id = page.mod_id -%}

{%- assign current_categories = page.categories -%}
{%- if current_categories == nil -%}
  {%- assign current_data = site.data.mods | where: "id", current_id | first -%}
  {%- assign current_categories = current_data.categories -%}
{%- endif -%}

{%- if current_categories == nil -%}
  {%- assign current_categories = "" | split: "|" -%}
{%- endif -%}

<section class="related-mods-inline">

  <strong>Related Mods:</strong>

  <div class="related-mods-grid">
    {%- for mod in site.data.mods -%}
      {%- if count < max_items and mod.id != current_id -%}

        {%- assign mod_page = site.mods | where: "mod_id", mod.id | first -%}
        {%- assign mod_categories = mod_page.categories | default: mod.categories -%}

        {%- assign match = false -%}
        {%- for cat in mod_categories -%}
          {%- if current_categories contains cat -%}
            {%- assign match = true -%}
          {%- endif -%}
        {%- endfor -%}

        {%- if match and mod_page -%}
          <a href="{{ mod_page.url | relative_url }}" class="related-mod-badge">
            <i class="fas fa-puzzle-piece"></i>
            {{ mod.name }}
          </a>
          {%- assign count = count | plus: 1 -%}
        {%- endif -%}

      {%- endif -%}
    {%- endfor -%}
  </div>

</section>

<style>
.related-mods-inline {
  margin-top: 1rem;
  font-size: 0.9rem;
}

.related-mods-grid {
  display: grid;
  grid-template-columns: repeat(3, max-content);
  gap: 8px 10px;
  margin-top: 6px;
}

.related-mod-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  text-decoration: none;
  font-weight: 600;
  background: rgba(0,0,0,0.05);
  color: var(--text-color);
  white-space: nowrap;
}

.related-mod-badge i {
  font-size: 0.8em;
  opacity: 0.7;
}

.related-mod-badge:hover {
  background: rgba(0,0,0,0.12);
}

@media (max-width: 700px) {
  .related-mods-grid {
    grid-template-columns: repeat(2, max-content);
  }
}
</style>
