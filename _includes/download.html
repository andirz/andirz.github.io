{% assign mod = site.data.mods | where: "id", include.mod_id | first %}

<div class="mod-card" style="
  border: 1px solid var(--border-color); 
  padding: 24px; 
  border-radius: 14px; 
  background: var(--card-bg); 
  margin: 2rem 0;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  border-left: 6px solid 
    {% if mod.status == 'updated' %}#007bff
    {% elsif mod.status == 'compatible' %}#28a745
    {% elsif mod.status == 'broken' %}#dc3545
    {% elsif mod.status == 'unknown' %}#6c757d
    {% else %}#343a40{% endif %};
">
  
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
    <h3 style="margin: 0; font-size: 1.4rem;">{{ mod.name }}</h3>
    <code style="font-size: 0.9rem; padding: 2px 8px; border-radius: 6px; background: rgba(0,0,0,0.05);">v{{ mod.version }}</code>
  </div>

  <div class="status-indicator" style="margin-bottom: 18px; font-size: 0.95rem; font-weight: 600; display: flex; align-items: center; flex-wrap: wrap; gap: 8px;">
    {% if mod.status == 'updated' %}
      <span style="color: #007bff;"><i class="fas fa-magic"></i> Frisch aktualisiert</span>
    {% elsif mod.status == 'compatible' %}
      <span style="color: #28a745;"><i class="fas fa-check-circle"></i> Kompatibel</span>
    {% elsif mod.status == 'broken' %}
      <span style="color: #dc3545;"><i class="fas fa-exclamation-triangle"></i> Defekt (Patch benötigt)</span>
    {% elsif mod.status == 'unknown' %}
      <span style="color: #6c757d;"><i class="fas fa-question-circle"></i> Ungeprüft</span>
    {% elsif mod.status == 'obsolete' %}
      <span style="color: #343a40; text-decoration: line-through;"><i class="fas fa-archive"></i> Veraltet / Integriert</span>
    {% endif %}
    
    <span style="color: var(--text-muted); font-weight: normal; font-size: 0.85rem;">
      (Stand: {{ mod.updated }})
    </span>
  </div>

  {% if mod.dependencies %}
  <div style="margin: 15px 0; padding: 12px; border: 1px dashed #007bff60; border-radius: 10px; background: rgba(0, 123, 255, 0.03);">
    <span style="font-size: 0.75rem; font-weight: bold; text-transform: uppercase; color: #007bff; display: block; margin-bottom: 8px;">Benötigte Libraries:</span>
    <div style="display: flex; flex-wrap: wrap; gap: 12px;">
      {% for dep_id in mod.dependencies %}
        {% assign dep = site.data.dependencies[dep_id] %}
        <a href="{{ dep.link }}" target="_blank" style="text-decoration: none; font-size: 0.85rem; font-weight: 500; display: flex; align-items: center; gap: 5px;">
          <i class="fas fa-external-link-alt" style="font-size: 0.7rem; color: #007bff;"></i> 
          <span>{{ dep.name }} <small style="color: #888; font-weight: normal;">by {{ dep.author }}</small></span>
        </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; margin-top: 20px;">
    {% if mod.curseforge %}
      <a href="{{ mod.curseforge }}" target="_blank" style="background: #f16436; color: white; padding: 10px; border-radius: 8px; text-decoration: none; font-weight: bold; text-align: center; font-size: 0.9rem;">
        <i class="fas fa-fire"></i> CurseForge
      </a>
    {% endif %}
    {% if mod.patreon %}
      <a href="{{ mod.patreon }}" target="_blank" style="background: #f96854; color: white; padding: 10px; border-radius: 8px; text-decoration: none; font-weight: bold; text-align: center; font-size: 0.9rem;">
        <i class="fab fa-patreon"></i> Patreon
      </a>
    {% endif %}
  </div>

</div>
