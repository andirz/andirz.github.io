{% assign mod = site.data.mods | where: "id", include.mod_id | first %}

<div class="mod-card" style="
  border: 1px solid var(--border-color); 
  padding: 24px; 
  border-radius: 14px; 
  background: var(--card-bg); 
  margin: 2rem 0;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  border-left: 6px solid 
    {% if mod.status == 'updated' %}#007bff
    {% elsif mod.status == 'compatible' %}#28a745
    {% elsif mod.status == 'broken' %}#dc3545
    {% elsif mod.status == 'unknown' %}#6c757d
    {% else %}#343a40{% endif %};
">
  
  <div style="margin-bottom: 12px; display: flex; align-items: baseline; gap: 10px;">
    <h3 style="margin: 0; font-size: 1.5rem;">{{ mod.name }}</h3>
    <span style="font-family: 'Courier New', monospace; font-size: 1rem; color: #888; font-weight: bold;">v{{ mod.version }}</span>
  </div>

  <div style="margin-bottom: 20px;">
    <div style="font-size: 1rem; font-weight: 700; margin-bottom: 5px;">
      {% if mod.status == 'updated' %}
        <span style="color: #007bff;">Updated for Patch {{ mod.patch }}</span>
      {% elsif mod.status == 'compatible' %}
        <span style="color: #28a745;">Compatible with Patch {{ mod.patch }}</span>
      {% elsif mod.status == 'broken' %}
        <span style="color: #dc3545;">Broken after Patch {{ mod.patch }}</span>
      {% elsif mod.status == 'unknown' %}
        <span style="color: #6c757d;">Unknown for Patch {{ mod.patch }}</span>
      {% elsif mod.status == 'obsolete' %}
        <span style="color: #343a40; text-decoration: line-through;">Obsolete (Patch {{ mod.patch }})</span>
      {% endif %}
    </div>
    <div style="font-size: 0.85rem; color: var(--text-muted);">
      Last update: <strong>{{ mod.updated }}</strong>
    </div>
  </div>

  {% if mod.dependencies %}
  <div style="margin-bottom: 20px; padding: 10px; background: rgba(0,0,0,0.02); border-radius: 8px;">
    <span style="font-size: 0.7rem; font-weight: bold; text-transform: uppercase; color: #888; display: block; margin-bottom: 5px;">Required:</span>
    <div style="display: flex; flex-wrap: wrap; gap: 12px;">
      {% for dep_id in mod.dependencies %}
        {% assign dep = site.data.dependencies[dep_id] %}
        <a href="{{ dep.link }}" target="_blank" style="text-decoration: none; font-size: 0.85rem; color: var(--link-color); font-weight: 600;">
          <i class="fas fa-link" style="font-size: 0.7rem;"></i> {{ dep.name }}
        </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <div style="display: flex; gap: 10px; flex-wrap: wrap;">
    {% if mod.curseforge %}
      <a href="{{ mod.curseforge }}" target="_blank" style="background: #444; color: #fff; padding: 10px 18px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.9rem; border: 1px solid #333;">
        CurseForge
      </a>
    {% endif %}
    {% if mod.patreon %}
      <a href="{{ mod.patreon }}" target="_blank" style="background: #444; color: #fff; padding: 10px 18px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.9rem; border: 1px solid #333;">
        Patreon
      </a>
    {% endif %}
    {% if mod.github %}
      <a href="{{ mod.github }}" target="_blank" style="background: #444; color: #fff; padding: 10px 18px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.9rem; border: 1px solid #333;">
        GitHub
      </a>
    {% endif %}
  </div>
</div>
